import{_ as y}from"./blobBackground-e9449148.js";import{d as g,v as C,u as P,r as l,o as n,c,b as o,e as d,w as u,f as p,B as V,_ as b,t as k,g as R,F as B,i as m,A,C as N}from"./index-62d6cd1e.js";import{_}from"./BaseInput.vue_vue_type_script_setup_true_lang-f474ff1c.js";const T=o("img",{src:y,alt:"Background",class:"w-screen h-screen object-cover"},null,-1),j={class:"flex h-screen justify-center items-center absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},E={class:"bg-white rounded-md p-8 xl:p-12 text-gray-500 font-body"},F={class:"flex flex-col gap-8 items-center text-center"},S=o("h1",{class:"font-title text-gray-600 text-2xl xl:text-4xl"},"Reset password",-1),U={class:"text-left self-start w-full flex flex-col gap-4"},$={key:0},q={key:1},z={key:0,class:"text-red-500"},H=g({__name:"ResetPasswordAction",setup(D){const w=C(),h=P(),t=l(""),r=l(""),v=()=>t.value.trim()===""||r.value.trim()===""?(e.value="Please fill in both fields",!1):t.value.length<8?(e.value="Password must be at least 8 characters",!1):t.value!==r.value?(e.value="Passwords do not match",!1):!0,e=l(""),i=l(!1),x=async()=>{if(!v())return;i.value=!0;const f=m(),s=w.query.oobCode;try{A(m(),s).then(()=>{const a=t.value;N(f,s,a).then(()=>{h.push({name:"Login"})}).catch(()=>{e.value="An error has occurred"})}).catch(()=>{e.value="This link has expired. Try resetting your password again."})}catch{e.value="An error has occurred"}};return(f,s)=>(n(),c(B,null,[T,o("div",j,[o("div",E,[o("div",F,[S,o("div",U,[d(_,{name:"newPassword",type:"password",placeholder:"Enter your new password",modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=a=>t.value=a),class:"w-full"},{default:u(()=>[p(" New password ")]),_:1},8,["modelValue"]),d(_,{name:"confirmPassword",type:"password",placeholder:"Confirm your new password",modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=a=>r.value=a),class:"w-full"},{default:u(()=>[p(" Confirm password ")]),_:1},8,["modelValue"])]),d(b,{onClick:x,class:"px-8"},{default:u(()=>[i.value?(n(),c("span",$,[d(V,{size:24,color:"white"})])):(n(),c("span",q,"Reset password"))]),_:1}),e.value?(n(),c("p",z,k(e.value),1)):R("",!0)])])])],64))}});export{H as default};
